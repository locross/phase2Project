{"ast":null,"code":"'use strict';\n/*\n Copyright 2012-2015, Yahoo Inc.\n Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\n\nconst path = require('path');\n\nconst fs = require('fs');\n\nconst mkdirp = require('make-dir');\n\nconst supportsColor = require('supports-color');\n/**\n * Base class for writing content\n * @class ContentWriter\n * @constructor\n */\n\n\nclass ContentWriter {\n  /**\n   * returns the colorized version of a string. Typically,\n   * content writers that write to files will return the\n   * same string and ones writing to a tty will wrap it in\n   * appropriate escape sequences.\n   * @param {String} str the string to colorize\n   * @param {String} clazz one of `high`, `medium` or `low`\n   * @returns {String} the colorized form of the string\n   */\n  colorize(str\n  /*, clazz*/\n  ) {\n    return str;\n  }\n  /**\n   * writes a string appended with a newline to the destination\n   * @param {String} str the string to write\n   */\n\n\n  println(str) {\n    this.write(`${str}\\n`);\n  }\n  /**\n   * closes this content writer. Should be called after all writes are complete.\n   */\n\n\n  close() {}\n\n}\n/**\n * a content writer that writes to a file\n * @param {Number} fd - the file descriptor\n * @extends ContentWriter\n * @constructor\n */\n\n\nclass FileContentWriter extends ContentWriter {\n  constructor(fd) {\n    super();\n    this.fd = fd;\n  }\n\n  write(str) {\n    fs.writeSync(this.fd, str);\n  }\n\n  close() {\n    fs.closeSync(this.fd);\n  }\n\n} // allow stdout to be captured for tests.\n\n\nlet capture = false;\nlet output = '';\n/**\n * a content writer that writes to the console\n * @extends ContentWriter\n * @constructor\n */\n\nclass ConsoleWriter extends ContentWriter {\n  write(str) {\n    if (capture) {\n      output += str;\n    } else {\n      process.stdout.write(str);\n    }\n  }\n\n  colorize(str, clazz) {\n    const colors = {\n      low: '31;1',\n      medium: '33;1',\n      high: '32;1'\n    };\n    /* istanbul ignore next: different modes for CI and local */\n\n    if (supportsColor.stdout && colors[clazz]) {\n      return `\\u001b[${colors[clazz]}m${str}\\u001b[0m`;\n    }\n\n    return str;\n  }\n\n}\n/**\n * utility for writing files under a specific directory\n * @class FileWriter\n * @param {String} baseDir the base directory under which files should be written\n * @constructor\n */\n\n\nclass FileWriter {\n  constructor(baseDir) {\n    if (!baseDir) {\n      throw new Error('baseDir must be specified');\n    }\n\n    this.baseDir = baseDir;\n  }\n  /**\n   * static helpers for capturing stdout report output;\n   * super useful for tests!\n   */\n\n\n  static startCapture() {\n    capture = true;\n  }\n\n  static stopCapture() {\n    capture = false;\n  }\n\n  static getOutput() {\n    return output;\n  }\n\n  static resetOutput() {\n    output = '';\n  }\n  /**\n   * returns a FileWriter that is rooted at the supplied subdirectory\n   * @param {String} subdir the subdirectory under which to root the\n   *  returned FileWriter\n   * @returns {FileWriter}\n   */\n\n\n  writerForDir(subdir) {\n    if (path.isAbsolute(subdir)) {\n      throw new Error(`Cannot create subdir writer for absolute path: ${subdir}`);\n    }\n\n    return new FileWriter(`${this.baseDir}/${subdir}`);\n  }\n  /**\n   * copies a file from a source directory to a destination name\n   * @param {String} source path to source file\n   * @param {String} dest relative path to destination file\n   * @param {String} [header=undefined] optional text to prepend to destination\n   *  (e.g., an \"this file is autogenerated\" comment, copyright notice, etc.)\n   */\n\n\n  copyFile(source, dest, header) {\n    if (path.isAbsolute(dest)) {\n      throw new Error(`Cannot write to absolute path: ${dest}`);\n    }\n\n    dest = path.resolve(this.baseDir, dest);\n    mkdirp.sync(path.dirname(dest));\n    let contents;\n\n    if (header) {\n      contents = header + fs.readFileSync(source, 'utf8');\n    } else {\n      contents = fs.readFileSync(source);\n    }\n\n    fs.writeFileSync(dest, contents);\n  }\n  /**\n   * returns a content writer for writing content to the supplied file.\n   * @param {String|null} file the relative path to the file or the special\n   *  values `\"-\"` or `null` for writing to the console\n   * @returns {ContentWriter}\n   */\n\n\n  writeFile(file) {\n    if (file === null || file === '-') {\n      return new ConsoleWriter();\n    }\n\n    if (path.isAbsolute(file)) {\n      throw new Error(`Cannot write to absolute path: ${file}`);\n    }\n\n    file = path.resolve(this.baseDir, file);\n    mkdirp.sync(path.dirname(file));\n    return new FileContentWriter(fs.openSync(file, 'w'));\n  }\n\n}\n\nmodule.exports = FileWriter;","map":{"version":3,"names":["path","require","fs","mkdirp","supportsColor","ContentWriter","colorize","str","println","write","close","FileContentWriter","constructor","fd","writeSync","closeSync","capture","output","ConsoleWriter","process","stdout","clazz","colors","low","medium","high","FileWriter","baseDir","Error","startCapture","stopCapture","getOutput","resetOutput","writerForDir","subdir","isAbsolute","copyFile","source","dest","header","resolve","sync","dirname","contents","readFileSync","writeFileSync","writeFile","file","openSync","module","exports"],"sources":["/home/locr/SE_Work/phase2Project/node_modules/istanbul-lib-report/lib/file-writer.js"],"sourcesContent":["'use strict';\n/*\n Copyright 2012-2015, Yahoo Inc.\n Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nconst path = require('path');\nconst fs = require('fs');\nconst mkdirp = require('make-dir');\nconst supportsColor = require('supports-color');\n\n/**\n * Base class for writing content\n * @class ContentWriter\n * @constructor\n */\nclass ContentWriter {\n    /**\n     * returns the colorized version of a string. Typically,\n     * content writers that write to files will return the\n     * same string and ones writing to a tty will wrap it in\n     * appropriate escape sequences.\n     * @param {String} str the string to colorize\n     * @param {String} clazz one of `high`, `medium` or `low`\n     * @returns {String} the colorized form of the string\n     */\n    colorize(str /*, clazz*/) {\n        return str;\n    }\n\n    /**\n     * writes a string appended with a newline to the destination\n     * @param {String} str the string to write\n     */\n    println(str) {\n        this.write(`${str}\\n`);\n    }\n\n    /**\n     * closes this content writer. Should be called after all writes are complete.\n     */\n    close() {}\n}\n\n/**\n * a content writer that writes to a file\n * @param {Number} fd - the file descriptor\n * @extends ContentWriter\n * @constructor\n */\nclass FileContentWriter extends ContentWriter {\n    constructor(fd) {\n        super();\n\n        this.fd = fd;\n    }\n\n    write(str) {\n        fs.writeSync(this.fd, str);\n    }\n\n    close() {\n        fs.closeSync(this.fd);\n    }\n}\n\n// allow stdout to be captured for tests.\nlet capture = false;\nlet output = '';\n\n/**\n * a content writer that writes to the console\n * @extends ContentWriter\n * @constructor\n */\nclass ConsoleWriter extends ContentWriter {\n    write(str) {\n        if (capture) {\n            output += str;\n        } else {\n            process.stdout.write(str);\n        }\n    }\n\n    colorize(str, clazz) {\n        const colors = {\n            low: '31;1',\n            medium: '33;1',\n            high: '32;1'\n        };\n\n        /* istanbul ignore next: different modes for CI and local */\n        if (supportsColor.stdout && colors[clazz]) {\n            return `\\u001b[${colors[clazz]}m${str}\\u001b[0m`;\n        }\n        return str;\n    }\n}\n\n/**\n * utility for writing files under a specific directory\n * @class FileWriter\n * @param {String} baseDir the base directory under which files should be written\n * @constructor\n */\nclass FileWriter {\n    constructor(baseDir) {\n        if (!baseDir) {\n            throw new Error('baseDir must be specified');\n        }\n        this.baseDir = baseDir;\n    }\n\n    /**\n     * static helpers for capturing stdout report output;\n     * super useful for tests!\n     */\n    static startCapture() {\n        capture = true;\n    }\n\n    static stopCapture() {\n        capture = false;\n    }\n\n    static getOutput() {\n        return output;\n    }\n\n    static resetOutput() {\n        output = '';\n    }\n\n    /**\n     * returns a FileWriter that is rooted at the supplied subdirectory\n     * @param {String} subdir the subdirectory under which to root the\n     *  returned FileWriter\n     * @returns {FileWriter}\n     */\n    writerForDir(subdir) {\n        if (path.isAbsolute(subdir)) {\n            throw new Error(\n                `Cannot create subdir writer for absolute path: ${subdir}`\n            );\n        }\n        return new FileWriter(`${this.baseDir}/${subdir}`);\n    }\n\n    /**\n     * copies a file from a source directory to a destination name\n     * @param {String} source path to source file\n     * @param {String} dest relative path to destination file\n     * @param {String} [header=undefined] optional text to prepend to destination\n     *  (e.g., an \"this file is autogenerated\" comment, copyright notice, etc.)\n     */\n    copyFile(source, dest, header) {\n        if (path.isAbsolute(dest)) {\n            throw new Error(`Cannot write to absolute path: ${dest}`);\n        }\n        dest = path.resolve(this.baseDir, dest);\n        mkdirp.sync(path.dirname(dest));\n        let contents;\n        if (header) {\n            contents = header + fs.readFileSync(source, 'utf8');\n        } else {\n            contents = fs.readFileSync(source);\n        }\n        fs.writeFileSync(dest, contents);\n    }\n\n    /**\n     * returns a content writer for writing content to the supplied file.\n     * @param {String|null} file the relative path to the file or the special\n     *  values `\"-\"` or `null` for writing to the console\n     * @returns {ContentWriter}\n     */\n    writeFile(file) {\n        if (file === null || file === '-') {\n            return new ConsoleWriter();\n        }\n        if (path.isAbsolute(file)) {\n            throw new Error(`Cannot write to absolute path: ${file}`);\n        }\n        file = path.resolve(this.baseDir, file);\n        mkdirp.sync(path.dirname(file));\n        return new FileContentWriter(fs.openSync(file, 'w'));\n    }\n}\n\nmodule.exports = FileWriter;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}